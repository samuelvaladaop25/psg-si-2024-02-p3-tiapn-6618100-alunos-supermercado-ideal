<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <title>Document</title>
</head>

<body>

    <div class="navbar">
        <div class="left">
            <img src="Img/carrinho-de-compras.png" alt="Logo">
            <span id="tLogo">Supermercado Ideal</span>
        </div>
        <div class="center">
            <span id="date">Data</span>
            <span id="time">Hora</span>
            <span id="status">Aberto</span>
        </div>
        <div class="right">
            <div class="profile">
                <img id="usuario" src="Img/usuario-de-perfil.png" alt="Imagem de Perfil">
                <p>Usuário</p>
            </div>
        </div>
    </div>

    <div class="sidebar">
        <a href="index.html" class="nav-item">
            <img src="Img/perfil.png" alt="Ícone 1">
            <span>Login</span>
        </a>
        <a href="caixa.html" class="nav-item">
            <img src="Img/caixa-eletronico.png" alt="Ícone 2">
            <span>Caixa eletrônico</span>
        </a>
        <a href="estoque.html" class="nav-item">
            <img src="Img/armazem.png" alt="Ícone 3">
            <span>Estoque</span>
        </a>
        <a href="reposicao.html" class="nav-item">
            <img src="Img/caixa.png" alt="Ícone 4">
            <span>Reposição<br> de produtos</span>
        </a>
    </div>

    <div class="login-container">
        <h2>Login</h2>
        <form id="login-form">
            <input type="text" id="usuario-input" placeholder="Usuário" required>
            <input type="password" id="senha-input" placeholder="Senha" required>
            <button type="submit">Entrar</button>
            <div id="mensagem-erro" class="erro"></div>
        </form>
    </div>
    <script>
        async function carregarUsuarios() {
            try {
                const resposta = await fetch('users.json');
                const usuarios = await resposta.json();
                return usuarios;
            } catch (erro) {
                console.error('Erro ao carregar usuários:', erro);
            }
        }

        async function verificarLogin(event) {
            event.preventDefault();

            const usuarioDigitado = document.getElementById("usuario-input").value;
            const senhaDigitada = document.getElementById("senha-input").value;
            const mensagemErro = document.getElementById("mensagem-erro");

            const usuarios = await carregarUsuarios();

            const usuarioValido = usuarios.find(user => user.usuario === usuarioDigitado && user.senha === senhaDigitada);

            if (usuarioValido) {
                mensagemErro.textContent = "";
                document.querySelector(".profile p").textContent = usuarioDigitado;
                document.querySelector(".login-container").style.display = "none";
            } else {
                mensagemErro.textContent = "Usuário ou senha incorretos.";
            }
        }

        document.getElementById("login-form").addEventListener("submit", verificarLogin);
    </script>
    <script src="js/main.js"></script>>
</body>

</html>